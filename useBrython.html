<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8" />

		<!-- iOS meta tags and icons -->
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<meta name="apple-mobile-web-app-title" content="BirdBrain Brython">
		<link rel="apple-touch-icon" href="img/icon_brython_152x152.png">

		<!-- PWA manifest -->
		<link rel="manifest" href="manifest-brython.json">
		<!-- PWA info -->
		<meta name="theme-color" content="#089BAB" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>BirdBrain Brython</title>
		<meta name="description" content="A Web App from BirdBrain Technologies. Use Brython to program your Finch Robot 2.0 or Hummingbird Robotics Kit.">


		<script src="js/jquery.js" ></script>
		<link href="fontawesome/css/all.min.css" rel="stylesheet" type="text/css">
		<link href="css/bootstrap.min.css" rel="stylesheet" type="text/css">
		<link href="css/fonts.css" rel="stylesheet" type="text/css">
		<link href="css/custom.css" rel="stylesheet" type="text/css">
	<!--	<link href="css/chromebook.css" rel="stylesheet" type="text/css"> -->
		<link rel="icon"  type="image/png" href="img/icon_brython_32x32.png">

	</head>
	<body>
		<header id="main-header">
			<div class="row">
				<div id=programmingLang>
					<img id="brython-logo" class="logo-brython" src="img/logo-brython.svg" alt="Brython" />
				</div>
				<div class="col-xs-12">
					<img id="birdbrain-logo" src="img/birdbrain-logo-h.png" alt="BirdBrain Technologies LLC" />
				</div>
				<div id="indicators">
					<div id="indicator-wifi" class="fa-stack /*indicator-on*/">
						<i class="icon fas fa-fw fa-wifi fa-stack-2x"></i>
						<i class="dot fas fa-circle fa-stack-1x"></i>
					</div>
					<!--<div id="indicator-bluetooth" class="fa-stack /*indicator-on*/">
						<i class="icon fab fa-fw fa-bluetooth fa-stack-2x"></i>
						<i class="dot fas fa-circle fa-stack-1x"></i>-->
					<!--	<i class="dot dot-spin fas fa-sync-alt fa-spin fa-stack-2x"></i> -->
					<!--</div>-->
					<div id="butInstall" class="fa-stack" aria-label="Install" hidden>
						<a id="btn-install" class="btn btn-orange">
							<i class="fas fa-download fa-lg"></i>
						</a>
					</div>
				</div>
			</div>
		</header>

		<section id="finder" style="display: block;">
			<div class="container">
				<div class="row" style="margin-bottom:20px; margin-top: 20px;">
					<div class="col-xs-12 text-center">
						<a id="find-button" class="btn btn-orange btn-lg" href="#">
							<!-- <i class="fas fa-sync-alt /*fa-spin*/"></i> -->
							<span id="findBtnText"> Find Robots</span>
						</a>
					</div>
					<!-- for now, we must use the default popup. When the scanning api is ready we can use this again: https://github.com/WebBluetoothCG/web-bluetooth/blob/master/implementation-status.md
					<div class="col-xs-12">
						<div id="robots-found" class="robot-list">

						</div>
					</div>-->
				</div>
				<div id="or" class="row" style="margin-bottom:20px;">
					<div class="col-xs-12 text-center">
						<span id="orText"> - OR - </span>
					</div>
				</div>
				<div id="program-row" class="row" style="margin-bottom:20px;">
					<div class="col-xs-4"></div>
					<div class="col-xs-4 text-center">
						<table style="width:100%;">
							<tr>
								<td style="text-align: left; vertical-align: top; padding-left: 5px;">
									<div style="visibility: hidden;">
										<i class="fas fa-info-circle"></i>
									</div>
								</td>
								<td style="width: 1%;">
									<a id="program-button" class="btn btn-orange btn-lg" href="#">
										<!-- <i class="fas fa-sync-alt /*fa-spin*/"></i> -->
										<span id="programBtnText"> CODE FIRST </span>
									</a>
								</td>
								<td style="text-align: left; vertical-align: top; padding-left: 5px;">
									<div class="hoverable">
										<i class="fas fa-info-circle"></i>
										<span id="programBtnHint" class="hovertext">Select CODE FIRST if you would like to start coding before connecting to a robot</span>
									</div>
								</td>
							</tr>
						</table>
					</div>
					<div class="col-xs-4"></div>
				</div>
			</div>
		</section>

		<section id="connected">
			<div id="btn-collapse-section" class="col-xs-2" style="visibility:hidden; position: absolute; right: 0; z-index: 1;">
				<a id="btn-collapse" class="btn btn-lg btn-orange">
					<i class="fas fa-compress-arrows-alt"></i>
				</a>
			</div>
			<div class="container">
				<div class="row">
					<div class="col-xs-12 text-center">
					    <h1 id="connection-state" style="visibility:hidden">Connected</h1>
					</div>
					<i id="startupState" class="dot dot-spin fas fa-sync-alt fa-spin fa-stack-2x"></i>
					<div class="col-xs-12">
						<div id="robots-connected" class="robot-list">
							<!-- connected robots will be added here -->
						</div>
					</div>
				</div>
			</div>
		</section>

		<section id="connected-expanded" style="visibility:hidden">
			<div class="container">
				<div class="row" style="margin-bottom:10px; margin-top:10px;">
					<div id="logo-section" class="col-xs-2"><img id="hummingbird-only-logo" src="img/hummingbird-only-logo.svg" alt="BirdBrain Technologies LLC" /></div>
					<div class="col-xs-8">
						<div id="robots-connected-snap" class="robot-list">
							<!-- connected robots will be added here when snap is open -->
						</div>
						<div class="row text-center">
							<a id="find-button-exp" class="btn btn-orange btn-lg" href="#">
								<!-- <i class="fas fa-sync-alt /*fa-spin*/"></i> -->
								<span id="findBtnExpText"> FIND ROBOTS</span>
							</a>
						</div>

					</div>
					<div id="btn-expand-section" class="col-xs-2"><a id="btn-expand" class="btn btn-lg btn-orange"><i class="fas fa-expand-arrows-alt"></i></a></div>
				</div>

				<div class="row">
					<div class="col-xs-12" id="snap-div">
						<i id="ideLoading" class="dot dot-spin fas fa-sync-alt fa-spin fa-stack-2x"></i>
						<!-- snap iframe will be added here -->
					</div>
				</div>
			</div>
		</section>

		<!-- Include main code -->
		<script>const useSnap=false;</script>
		<script src="js/install.js"></script>
		<script src="js/fancyNames.js"></script>
		<script src="js/translations.js"></script>
		<script src="js/robot.js"></script>
		<script src="js/robotData.js"></script>
		<script src="js/messages.js"></script>
		<script src="js/ble.js"></script>
		<script src="js/gui.js"></script>

		<script>
	    // Register service worker.
	    if ('serviceWorker' in navigator) {
	      window.addEventListener('load', () => {
	        navigator.serviceWorker.register('service-worker-brython.js', {
    				updateViaCache: 'none'
  				}).then((reg) => {
	            console.log('Service worker registered.', reg);
	          }).catch(error => {
				      console.error("Error registering service worker: " + error.message);
				    });
					onLoad();
	      });
	    }
  	</script>

	</body>
</html>
